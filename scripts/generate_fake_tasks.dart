import 'dart:convert';
import 'package:http/http.dart' as http;
import 'package:faker/faker.dart';

/// ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Task ‡∏à‡∏≥‡∏•‡∏≠‡∏á (Fake Data)
/// ‡πÉ‡∏ä‡πâ‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à Faker ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏° ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á PocketBase
///
/// ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:
/// 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤ PocketBase ‡∏£‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà http://127.0.0.1:8090
/// 2. ‡∏™‡∏£‡πâ‡∏≤‡∏á collection ‡∏ä‡∏∑‡πà‡∏≠ 'tasks' ‡πÉ‡∏ô PocketBase Admin UI
/// 3. ‡πÄ‡∏û‡∏¥‡πà‡∏° fields: title (text), is_completed (bool)
/// 4. ‡∏£‡∏±‡∏ô‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ô‡∏µ‡πâ: dart scripts/generate_fake_tasks.dart

const String pocketbaseUrl = 'http://127.0.0.1:8090';
const String collectionName = 'tasks';

void main() async {
  print('üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á...\n');

  // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Tasks ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á
  const int numberOfTasks = 20;

  final faker = Faker();
  int successCount = 0;
  int failCount = 0;

  for (int i = 1; i <= numberOfTasks; i++) {
    try {
      // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢ Faker
      String taskTitle = _generateRandomTaskTitle(faker);

      // ‡∏™‡∏∏‡πà‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (70% ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏£‡πá‡∏à, 30% ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß)
      bool isCompleted = faker.randomGenerator.integer(100) < 30;

      // ‡∏™‡∏£‡πâ‡∏≤‡∏á Task ‡πÉ‡∏ô PocketBase
      final success = await createTask(taskTitle, isCompleted);

      if (success) {
        successCount++;
        print(
            '‚úÖ [$i/$numberOfTasks] ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: "$taskTitle" (${isCompleted ? "‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß" : "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏£‡πá‡∏à"})');
      } else {
        failCount++;
        print('‚ùå [$i/$numberOfTasks] ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: "$taskTitle"');
      }
    } catch (e) {
      failCount++;
      print('‚ùå [$i/$numberOfTasks] ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: $e');
    }

    // ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á request ‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ
    await Future.delayed(Duration(milliseconds: 100));
  }

  print('\n' + '=' * 50);
  print('‚ú® ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô!');
  print('   ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: $successCount');
  print('   ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß: $failCount');
  print('=' * 50);
}

/// ‡∏™‡∏£‡πâ‡∏≤‡∏á Task ‡πÉ‡∏ô PocketBase
Future<bool> createTask(String title, bool isCompleted) async {
  try {
    final url = Uri.parse('$pocketbaseUrl/api/collections/$collectionName/records');

    final response = await http.post(
      url,
      headers: {'Content-Type': 'application/json'},
      body: json.encode({
        'title': title,
        'is_completed': isCompleted,
      }),
    );

    return response.statusCode == 200;
  } catch (e) {
    print('   Error: $e');
    return false;
  }
}

/// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°
String _generateRandomTaskTitle(Faker faker) {
  // ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ template ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô
  final templates = [
    // ‡∏á‡∏≤‡∏ô‡∏ö‡πâ‡∏≤‡∏ô
    '‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î${faker.randomGenerator.element(["‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô", "‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ß", "‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥", "‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏±‡πà‡∏á‡πÄ‡∏•‡πà‡∏ô", "‡∏ö‡πâ‡∏≤‡∏ô"])}',
    '‡∏ã‡∏±‡∏Å‡∏ú‡πâ‡∏≤${faker.randomGenerator.element(["", " ‡πÅ‡∏•‡∏∞‡∏ï‡∏≤‡∏Å‡∏ú‡πâ‡∏≤", " ‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡πâ‡∏≤"])}',
    '‡∏•‡πâ‡∏≤‡∏á‡∏à‡∏≤‡∏ô${faker.randomGenerator.element(["", " ‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£", " ‡πÉ‡∏ô‡∏≠‡πà‡∏≤‡∏á"])}',
    '‡∏£‡∏î‡∏ô‡πâ‡∏≥‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ${faker.randomGenerator.element(["", " ‡πÉ‡∏ô‡∏™‡∏ß‡∏ô", " ‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡πâ‡∏≤‡∏ô"])}',
    '‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô',

    // ‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô/‡∏á‡∏≤‡∏ô
    '‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô${faker.randomGenerator.element(["‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå", "‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå", "‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©", "‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢", "‡∏™‡∏±‡∏á‡∏Ñ‡∏°"])}',
    '‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠${faker.randomGenerator.element(["", " ‡∏ö‡∏ó‡∏ó‡∏µ‡πà ${faker.randomGenerator.integer(10, min: 1)}"])}',
    '‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠${faker.randomGenerator.element(["", " ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå", " ‡∏á‡∏≤‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°"])}',
    '‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô${faker.randomGenerator.element(["", " ‡∏™‡πà‡∏á‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå", " ‡∏Å‡∏•‡∏∏‡πà‡∏°"])}',
    '‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°${faker.randomGenerator.element(["‡∏ó‡∏µ‡∏°", "‡πÅ‡∏ú‡∏ô‡∏Å", "‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå"])}',

    // ‡∏á‡∏≤‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß
    '‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢${faker.randomGenerator.element(["", " 30 ‡∏ô‡∏≤‡∏ó‡∏µ", " ‡∏ó‡∏µ‡πà‡∏¢‡∏¥‡∏°", " ‡∏ß‡∏¥‡πà‡∏á"])}',
    '‡πÑ‡∏õ‡∏ï‡∏±‡∏î‡∏ú‡∏°',
    '‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏´‡∏°‡∏≠${faker.randomGenerator.element(["", "‡∏ü‡∏±‡∏ô", " ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û"])}',
    '‡∏ã‡πà‡∏≠‡∏°${faker.randomGenerator.element(["‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå", "‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô", "‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå", "‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå"])}',
    '‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠',

    // ‡∏ä‡πá‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á
    '‡∏ã‡∏∑‡πâ‡∏≠${faker.randomGenerator.element(["‡∏≠‡∏≤‡∏´‡∏≤‡∏£", "‡∏ú‡∏±‡∏Å", "‡∏ú‡∏•‡πÑ‡∏°‡πâ", "‡∏Ç‡∏ô‡∏°", "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°"])}',
    '‡πÑ‡∏õ‡∏ï‡∏•‡∏≤‡∏î${faker.randomGenerator.element(["", " ‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏™‡∏î", " ‡πÄ‡∏ä‡πâ‡∏≤"])}',
    '‡πÑ‡∏õ${faker.randomGenerator.element(["7-11", "‡∏´‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤", "‡∏£‡πâ‡∏≤‡∏ô‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏ã‡∏∑‡πâ‡∏≠"])}',

    // ‡∏™‡∏±‡∏á‡∏Ñ‡∏°
    '‡πÇ‡∏ó‡∏£‡∏´‡∏≤${faker.randomGenerator.element(["‡∏û‡πà‡∏≠‡πÅ‡∏°‡πà", "‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô", "‡∏ç‡∏≤‡∏ï‡∏¥", "‡∏û‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏á"])}',
    '‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•${faker.randomGenerator.element(["", " ‡∏ñ‡∏∂‡∏á‡πÄ‡∏à‡πâ‡∏≤‡∏ô‡∏≤‡∏¢", " ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏á‡∏≤‡∏ô"])}',
    '‡∏ï‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°${faker.randomGenerator.element(["", " ‡πÉ‡∏ô Line", " ‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ"])}',
    '‡∏à‡∏±‡∏î‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ${faker.randomGenerator.element(["‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î", "‡∏™‡∏±‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå", "‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏â‡∏•‡∏≠‡∏á"])}',

    // ‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô
    '‡∏à‡πà‡∏≤‡∏¢‡∏ö‡∏¥‡∏•${faker.randomGenerator.element(["‡πÑ‡∏ü‡∏ü‡πâ‡∏≤", "‡∏õ‡∏£‡∏∞‡∏õ‡∏≤", "‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï", "‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå"])}',
    '‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô${faker.randomGenerator.element(["‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤", "‡∏Ñ‡πà‡∏≤‡∏á‡∏ß‡∏î", ""])}',
    '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£',

    // ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ
    '‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï${faker.randomGenerator.element(["‡πÅ‡∏≠‡∏õ", "‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£", "‡∏ã‡∏≠‡∏ü‡∏ï‡πå‡πÅ‡∏ß‡∏£‡πå"])}',
    '‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•${faker.randomGenerator.element(["", " ‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå", " ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå"])}',
    '‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á${faker.randomGenerator.element(["‡πÅ‡∏≠‡∏õ", "‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°", "‡∏£‡∏∞‡∏ö‡∏ö"])}',

    // ‡∏≠‡∏∑‡πà‡∏ô‡πÜ
    '‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô${faker.randomGenerator.element(["‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î", "‡∏ó‡∏£‡∏¥‡∏õ", "‡∏á‡∏≤‡∏ô", "‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏´‡∏ô‡πâ‡∏≤"])}',
    '‡∏à‡∏≠‡∏á‡∏ï‡∏±‡πã‡∏ß${faker.randomGenerator.element(["‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ö‡∏¥‡∏ô", "‡∏£‡∏ñ‡πÑ‡∏ü", "‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ï", "‡∏´‡∏ô‡∏±‡∏á"])}',
    '‡πÄ‡∏ä‡πá‡∏Ñ${faker.randomGenerator.element(["‡∏≠‡∏µ‡πÄ‡∏°‡∏•", "‡∏Ç‡πà‡∏≤‡∏ß", "‡πÇ‡∏ã‡πÄ‡∏ä‡∏µ‡∏¢‡∏•‡∏°‡∏µ‡πÄ‡∏î‡∏µ‡∏¢"])}',
  ];

  return faker.randomGenerator.element(templates);
}
